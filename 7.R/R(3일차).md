## R 3일차  교재 154 p ~

## 데이터 분석을 위한 필수 패키지와 함수

> 자세한 내용은 교재 참고
>
> 다운받은 패키지는 탐색기 -> 문서 -> R ->  win-libary안에 저장된다.
>
> 패키지 받은 폴더(win-libary)를 압축해서 들고다니면 다른 컴퓨터에서도 붙여넣기로 동일한 패키지를 사용할 수 있다.  (리눅스는 다른 폴더가 있다 - win-libary 가 아닌)

- 데이터로드 용 패키지
  - RMySQL, RPostgresSQL,RSQlite
- 엑셀처리
  - XLConnect, readxl
- 데이터 가공 (데이터 조작)
  - dplyr

![1](R(3일차)/1.jpg)

![2](R(3일차)/2.jpg)



## 데이터의 행을 열로, 열을 행으로 p166~

> reshape2 패키지는 대표적으로 melt() , cast() 함수가 포함

```R
install.packages("reshape2")
library(reshape2)
```



```R
head(airquality) # airquality 는 R 내부에서 기본적으로 제공하는 데이터 테이블
				# head는 상위 6개 데이터만 출력

  Ozone Solar.R Wind Temp Month Day
1    41     190  7.4   67     5   1
2    36     118  8.0   72     5   2
3    12     149 12.6   74     5   3
4    18     313 11.5   62     5   4
5    NA      NA 14.3   56     5   5
6    28      NA 14.9   66     5   6


dim(airquality) # 데이터의 전체적인 행과 열 파악하기

str(airquality) # 데이터의 구조 파악하기

names(airquality) <- tolower(names(airquality)) 
# 컬럼명을 소문자로 변환 - 실수를 막고 분석을 용이하게 하기 위해
			#toupper - 대문자로 모두 변환

melt(데이터세트, id.var ="기준열", measure.vars="변환열")

m_air <- melt(airquality, id.vars = c("month","day"))
# 월,일 자별 가로정렬
    month day variable value
1       5   1    ozone  41.0
2       5   2    ozone  36.0
3       5   3    ozone  12.0
4       5   4    ozone  18.0

m_air <- melt(airquality, id.vars = c("month","day"), measure.vars = "temp")
    month day variable value
1       5   1     temp    67
2       5   2     temp    72
3       5   3     temp    74
4       5   4     temp    62

m_air <- melt(airquality, id.vars = c("MONTH","DAY"), 
              measure.vars = c("TEMP","OZONE"))


# 추출한 데이터를 가지고 다양하게 활용가능
m_air <- melt(airquality, id.vars = c("MONTH","DAY"), 
              measure.vars = c("TEMP"))

mean_temp <- mean(m_air$value)  # 월,일 온도의 총 평균

# 데이터 안에 NA 값이 있으며 na.rm =T 를 해야한다.
m_air <- melt(airquality, id.vars = c("MONTH","DAY"), 
              measure.vars = c("OZONE"))

mean_temp <- mean(m_air$value,na.rm = T)



```

