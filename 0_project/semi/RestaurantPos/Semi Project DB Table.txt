

	/* CATEGORY TABLE 구성 (ID, 카테고리이름)  */
CREATE TABLE CATEGORY(
ID VARCHAR2(10) PRIMARY KEY,
NAME VARCHAR2(10)
);
COMMIT;

	/* MENU TABLE 구성 (ID, 카테고리ID, 메뉴이름, 가격, 총판매수량, 이미지주소1,2,3) */
CREATE TABLE MENU(
ID VARCHAR2(10) PRIMARY KEY,
CATEGORY_ID VARCHAR2(10),
NAME VARCHAR2(20),
PRICE NUMBER(10),
TSALES NUMBER(10),
IMG1 VARCHAR2(20),
IMG2 VARCHAR2(20),
IMG3 VARCHAR2(20)
);
COMMIT;

ALTER TABLE MENU ADD CONSTRAINT 
FK_MENU_CATEGORY_ID FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(ID);


	/* TAB TABLE 구성 (ID, 비밀번호, 테이블번호)  */
CREATE TABLE TAB(
ID VARCHAR2(10) PRIMARY KEY,
PWD VARCHAR2(10),
NAME NUMBER(3),
ADMIN_ID VARCHAR2(10),
NUM NUMBER(10)
);
COMMIT;


	/* RECEIPT TABLE 구성 (ID, 테이블ID, 날짜, 결제방법, 총금액)  */

CREATE SEQUENCE RECEIPT_SEQ
START WITH 1
INCREMENT BY 1;


CREATE TABLE RECEIPT(
ID VARCHAR2(10) PRIMARY KEY,
TAB_ID VARCHAR2(10),
REGDATE DATE,
PAYMENT NUMBER(2),
TOTAL NUMBER(10)
);
COMMIT;


ALTER TABLE RECEIPT ADD CONSTRAINT 
FK_RECEIPT_TAB_ID FOREIGN KEY(TAB_ID) REFERENCES TAB(ID);
COMMIT;


	/* SALES TABLE 구성 (ID, 메뉴ID, 영수증ID, 수량, 총금액, 메뉴서빙확인,판매금액)  */

CREATE SEQUENCE SALES_SEQ
START WITH 1
INCREMENT BY 1;


CREATE TABLE SALES(
ID VARCHAR2(10) PRIMARY KEY,
MENU_ID VARCHAR2(10),
RECEIPT_ID VARCHAR2(10),
QT NUMBER(10),
S_SERVICE NUMBER(2),
S_PRICE NUMBER(10)
);
COMMIT;


ALTER TABLE SALES ADD CONSTRAINT 
FK_SALES_MENU_ID FOREIGN KEY(MENU_ID) REFERENCES MENU(ID);

ALTER TABLE SALES ADD CONSTRAINT 
FK_SALES_RECEIPT_ID FOREIGN KEY(RECEIPT_ID) REFERENCES RECEIPT(ID);
COMMIT;



	/* BULLETIN TABLE 구성 (ID(SEQ), 테이블ID, 제목, 내용, 작성자, 날짜, 댓글아이디(작성자아이디)  */

CREATE SEQUENCE BULLETIN_SEQ
START WITH 1
INCREMENT BY 1;


CREATE TABLE BULLETIN(
ID NUMBER(5) PRIMARY KEY,
TAB_ID VARCHAR2(10),
TITLE VARCHAR2(20),
CONTENT VARCHAR2(100),
AUTHOR VARCHAR2(10),
REGDATE DATE,
COMMENT_ID NUMBER(5),
IMG VARCHAR2(20)
);
COMMIT;

ALTER TABLE BULLETIN ADD CONSTRAINT 
FK_BULLETIN_TAB_ID FOREIGN KEY(TAB_ID) REFERENCES TAB(ID);
COMMIT;




	/* TABLE 초기화*/
DROP SEQUENCE BULLETIN_SEQ;
DROP SEQUENCE SALES_SEQ;
DROP SEQUENCE SALES_SEQ;

DROP TABLE BULLETIN;
DROP TABLE SALES;
DROP TABLE RECEIPT;
DROP TABLE TAB;
DROP TABLE MENU;
DROP TABLE CATEGORY;

COMMIT;

